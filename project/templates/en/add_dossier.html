{% extends "index.html" %}
{% block content %}
<div class="mymain-bar d-flex justify-content-between align-items-center">
    <h1>Adding a New File - Part 1</h1>
    <div style="margin-right: 80px;">
        <a href="/en/switch_to_fr" class="btn btn-outline-dark me-2">french</a>
        <a href="/fr/switch_to_en" class="btn btn-outline-dark">English</a>
    </div>
</div>
<div style="padding-left: 35px;">
    <div style="padding-left: 35px;">
        <div class="my-box p-3 mt-5">
            <h2 class="text-center mb-4">Complete the File Details</h2>
            <form method="POST" action="/en/dossier/new/add" enctype="multipart/form-data" onsubmit="return validateForm()">
                <div class="mb-3">
                    <label for="username" class="form-label">Username</label>
                    <input type="text" id="username" name="username" class="form-control" placeholder="Selice" required>
                </div>
                <div class="mb-3">
                    <label for="name" class="form-label">Name</label>
                    <input type="text" id="name" name="name" class="form-control" placeholder="Elice" required>
                </div>
                <div class="mb-3">
                    <label for="mail" class="form-label">Mail</label>
                    <input type="email" id="mail" name="mail" class="form-control" placeholder="elicesimon06@gmail.com" required>
                </div>
                <div class="mb-3">
                    <label for="postereference" class="form-label">Post reference</label>
                    <input type="text" id="postereference" name="postereference" class="form-control" placeholder="Secrétaire" required>
                </div>
                <div class="mb-3">
                    <label for="profref" class="form-label">Reference of the teacher</label>
                    <input type="text" id="profref" name="profref" class="form-control" value="" required>
                </div>
                <div class="mb-3">
                    <label for="phonenumber" class="form-label">Phone number</label>
                    <input type="text" id="phonenumber" name="phonenumber" class="form-control" placeholder="0496066387" required>
                </div>
                <div class="mb-3">
                    <label for="image">Upload Image:</label>
                    <input type="file" id="image" name="image" accept=".jpg,.jpeg,.png">
                </div>
            
                <!-- Script de validation -->
                <script>
                    function validateForm() {
                        const imageInput = document.getElementById("image");
                        const allowedExtensions = /(\.jpg|\.jpeg|\.png)$/i;
                
                        if (!imageInput.value) {
                            alert("Adding an image is mandatory. Please upload an image.");
                            return false; // Empêche la soumission du formulaire
                        }
                
                        if (!allowedExtensions.exec(imageInput.value)) {
                            alert("Invalid file format. Only .jpg, .jpeg, and .png are allowed.");
                            imageInput.value = ""; // Réinitialise le champ fichier
                            return false; // Empêche la soumission du formulaire
                        }
                
                        return true; // Permet la soumission si tout est correct
                    }
                </script>
            
                <div class="d-flex justify-content-center">
                    <button type="submit" class="btn btn-outline-dark" style="width: 400px; height: 50px; box-shadow: 3px 2px 2px 3px rgb(179, 186, 194);">Ajouter</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}